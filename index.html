<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programming Activity</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <script src="conversionFunctions.js"></script>
    <script src="translatorFunctions.js"></script>

    <div id="app-container">
        <h2 class="name-label" >Kharylle Ann F. Iglesias             BSCPE - 4               CPE463 - H2</h2>
        <h1 class="card-subtitle">Programming Activity</h1>
        <h2 class="card-title">Number Systems, Conversion, and Addition</h1>
        <div id="menu" class="glassy-card">
            <h2 class="card-title">Main Menu</h2>
            <button class="menu-button" onclick="showSection('decimal-conversion')">1. Convert Decimal to Binary/Octal/Hex</button>
            <button class="menu-button" onclick="showSection('base-conversion')">2. Convert Binary/Octal/Hex to Decimal</button>
            <button class="menu-button" onclick="showSection('addition')">3. Add Two Numbers in Any Base</button>
            <button class="menu-button" onclick="showSection('encode')">4. Secret Code Translator (Encode)</button>
            <button class="menu-button" onclick="showSection('decode')">5. Secret Code Translator (Decode)</button>
            <button class="menu-button" onclick="exitProgram()">6. Exit Program</button>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div id="modal-title"></div>
            <div id="modal-content"></div>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            const modal = document.getElementById('myModal');
            const modalContent = document.getElementById('modal-content');
            const modalTitle = document.getElementById('modal-title');
            let htmlContent = '';
            let title = '';

            switch (sectionId) {
                case 'decimal-conversion':
                    title = '<h2 class="card-title">Decimal to Binary/Octal/Hex</h2>';
                    htmlContent = `
                        <div class="input-group">
                            <label for="decimalInput">Decimal Number:</label>
                            <input type="text" id="decimalInput">
                        </div>
                        <div class = "button-group">
                            <button class="clear-button" onclick="clearDecimal()">Clear</button>
                            <button class="action-button" onclick="convertDecimal()">Convert</button>                          
                        </div>
                        <div id="result-decimal" class="result-box" style="display:none;"></div>
                    `;
                    break;
                case 'base-conversion':
                    title = '<h2 class="card-title">Any Base to Decimal</h2>';
                    htmlContent = `
                        <div class="input-group">
                            <label for="baseNumber">Number:</label>
                            <input type="text" id="baseNumber">
                        </div>
                        <div class="input-group">
                            <label for="baseSelect">Base:</label>
                            <select id="baseSelect">
                                <option value="2">Binary (2)</option>
                                <option value="8">Octal (8)</option>
                                <option value="16">Hex (16)</option>
                            </select>
                        </div>
                        <div class = "button-group">
                            <button class="clear-button" onclick="clearBase()">Clear</button>
                            <button class="action-button" onclick="convertBase()">Convert</button>
                        </div>
                        <div id="result-base" class="result-box" style="display:none;"></div>
                    `;
                    break;
                case 'addition':
                    title = '<h2 class="card-title">Add Two Numbers in Any Base</h2>';
                    htmlContent = `
                        <div class="input-select-group">
                            <div class="input-group">
                            <label for="num1">First Number:</label>
                            <input type="text" id="num1">
                        </div>
                        <div class="input-group">
                            <label for="base1">Base:</label>
                            <select id="base1">
                                <option value="2">Binary (2)</option>
                                <option value="8">Octal (8)</option>
                                <option value="10">Decimal (10)</option>
                                <option value="16">Hex (16)</option>
                            </select>
                        </div>
                        </div>              
                        <div class="input-select-group">
                            <div class="input-group">
                                <label for="num2">Second Number:</label>
                                <input type="text" id="num2">
                            </div>
                            <div class="input-group">
                                <label for="base2">Base:</label>
                                <select id="base2">
                                    <option value="2">Binary (2)</option>
                                    <option value="8">Octal (8)</option>
                                    <option value="10">Decimal (10)</option>
                                    <option value="16">Hex (16)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class = "button-group">
                            <button class="clear-button" style="border-radius: 10px" onclick="clearAddition()">Clear</button>
                            <button class="action-button" onclick="addNumbers()">Add</button>
                        </div>
                        <div id="result-addition" class="result-box" style="display:none;"></div>
                    `;
                    break;
                case 'encode':
                    title = '<h2 class="card-title">Secret Code Translator (Encode)</h2>';
                    htmlContent = `
                        <div class="input-group">
                            <label for="message">Message:</label>
                            <input type="text" id="message">
                        </div>
                        <div class="input-group">
                            <label for="secretKeyEncode">Secret Key (Decimal):</label>
                            <input type="number" id="secretKeyEncode">
                        </div>
                        <div class = "button-group">
                            <button class="clear-button" onclick="clearEncode()">Clear</button>
                            <button class="action-button" onclick="encodeMessage()">Encode</button>                            
                        </div>
                        <div id="result-encode" class="result-box" style="display:none;"></div>
                    `;
                    break;
                case 'decode':
                    title = '<h2 class="card-title">Secret Code Translator (Decode)</h2>';
                    htmlContent = `                        
                        <div class="input-group">
                            <label for="secretKeyDecode">Secret Key (Decimal):</label>
                            <input type="number" id="secretKeyDecode">
                        </div>
                        <div class = "button-group">
                            <button class="clear-button" onclick="clearDecode()">Clear</button>
                            <button class="action-button" onclick="decodeMessage()">Decode</button>                            
                        </div>
                        <div id="result-decode" class="result-box" style="display:none;"></div>
                    `;
                    break;
                case 'exit':
                    title = '<h2 class="card-title">Exit</h2>';
                    htmlContent = `<p style="text-align: center;">Exiting program. Goodbye!</p>`;
                    break;
                default:
                    title = '<h2 class="card-title">Invalid Option</h2>';
                    htmlContent = `<p class="error-message">Invalid option selected.</p>`;
                    break;
            }

            modalTitle.innerHTML = title;
            modalContent.innerHTML = htmlContent;
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('myModal');
            modal.style.display = 'none';
        }

        // 1. Decimal to Any Base
        function convertDecimal() {
            const input = document.getElementById('decimalInput').value;
            const resultBox = document.getElementById('result-decimal');

            if (input === '' || isNaN(parseFloat(input))) {
                resultBox.innerHTML = '<p class="error-message">Invalid input. Please enter a valid number.</p>';
                resultBox.style.display = 'block';
                return;
            }

            const decimalNum = parseFloat(input);
            const binary = convertToAnyBase(decimalNum, 2);
            const octal = convertToAnyBase(decimalNum, 8);
            const hex = convertToAnyBase(decimalNum, 16);

            resultBox.innerHTML = `
                <p><strong>Binary:</strong> ${binary}</p>
                <p><strong>Octal:</strong> ${octal}</p>
                <p><strong>Hex:</strong> ${hex}</p>
            `;
            resultBox.style.display = 'block';
        }

        function clearDecimal() {
            document.getElementById('decimalInput').value = '';
            document.getElementById('result-decimal').style.display = 'none';
        }

        // 2. Any Base to Decimal
        function convertBase() {
            const num = document.getElementById('baseNumber').value;
            const base = parseInt(document.getElementById('baseSelect').value);
            const resultBox = document.getElementById('result-base');

            const decimal = convertBaseToDecimal(num, base);

            if (isNaN(decimal)) {
                 resultBox.innerHTML = '<p class="error-message">Invalid input. Please enter a valid number for the selected base.</p>';
            } else {
                resultBox.innerHTML = `<p><strong>Decimal:</strong> ${decimal}</p>`;
            }
            resultBox.style.display = 'block';
        }

        function clearBase() {
            document.getElementById('baseNumber').value = '';
            document.getElementById('baseSelect').selectedIndex = 0;
            document.getElementById('result-base').style.display = 'none';
        }

        // 3. Add Two Numbers in Any Base
        function addNumbers() {
            const num1Str = document.getElementById('num1').value;
            const base1 = parseInt(document.getElementById('base1').value);
            const num2Str = document.getElementById('num2').value;
            const base2 = parseInt(document.getElementById('base2').value);
            const resultBox = document.getElementById('result-addition');
            
            const decimal1 = convertBaseToDecimal(num1Str, base1);
            const decimal2 = convertBaseToDecimal(num2Str, base2);

            if (isNaN(decimal1) || isNaN(decimal2)) {
                resultBox.innerHTML = '<p class="error-message">Invalid input. Please enter valid numbers for both bases.</p>';
                resultBox.style.display = 'block';
                return;
            }

            const sumDecimal = decimal1 + decimal2;
            const sumBinary = convertToAnyBase(sumDecimal, 2);
            const sumOctal = convertToAnyBase(sumDecimal, 2);
            const sumHex = convertToAnyBase(sumDecimal, 2);

            resultBox.innerHTML = `
                <p><strong>(Decimal):</strong> ${sumDecimal}</p>
                <p><strong>(Binary):</strong> ${sumBinary}</p>
                <p><strong>(Octal):</strong> ${sumOctal}</p>
                <p><strong>(Hex):</strong> ${sumHex}</p>
            `;
            resultBox.style.display = 'block';
        }

        function clearAddition() {
            document.getElementById('num1').value = '';
            document.getElementById('base1').selectedIndex = 0;
            document.getElementById('num2').value = '';
            document.getElementById('base2').selectedIndex = 0;
            document.getElementById('result-addition').style.display = 'none';
        }

        // 4. Secret Code Translator (Encode)
        function clearEncode() {
            document.getElementById('message').value = '';
            document.getElementById('secretKeyEncode').value = '';
            document.getElementById('result-encode').style.display = 'none';
        }

        // 5. Secret Code Translator (Decode)
        function clearDecode() {
            document.getElementById('secretKeyDecode').value = '';
            document.getElementById('result-decode').style.display = 'none';
        }

        function exitProgram() {
            const modal = document.getElementById('myModal');
            const modalContent = document.getElementById('modal-content');
            const modalTitle = document.getElementById('modal-title');
            
            modalTitle.innerHTML = '<h2 class="card-title">Exit</h2>';
            modalContent.innerHTML = '<p style="text-align: center;">Exiting program. Goodbye!</p>';
            modal.style.display = 'flex';

            setTimeout(closeWindow, 1500);
        }

        function closeWindow() {
            window.close();
        }
    </script>
</body>
</html>
